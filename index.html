<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>Secure Zone</title>
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<style>
body {
  margin: 0;
  background: #2f3443;
  color: white;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  text-align: center;
}
.card {
  margin: 60px auto;
  background: white;
  color: black;
  width: 300px;
  border-radius: 8px;
  padding: 20px;
}
.yellow {
  background: #f4b400;
  color: white;
  padding: 10px;
  font-size: 14px;
}
.time {
  margin: 10px 0;
  font-size: 14px;
}
.active {
  color: #32ff32;
  font-size: 20px;
  margin-top: 10px;
}
.footer {
  margin-top: 20px;
  font-size: 13px;
  color: #ddd;
}
</style>
</head>

<body>

<div class="card">
  <div class="yellow">将二维码对准扫描器扫码进入场</div>

  <div class="time" id="nowTime"></div>

  <div id="qrcode"></div>

  <div class="active">已生效</div>
  <div class="active" id="countdown"></div>
</div>

<div class="footer">
尊敬的员工您好，您已进入企业涉密区域，出于企业安全考虑，您的手机摄像头将被禁止拍摄，感谢您的配合。
</div>

<script>
const expireSeconds = 120;
let remaining = expireSeconds;

// time
function updateTime(){
  document.getElementById("nowTime").innerText =
   new Date().toLocaleString();
}
setInterval(updateTime,1000);
updateTime();

// countdown
setInterval(()=>{
  let m = Math.floor(remaining/60);
  let s = remaining % 60;
  document.getElementById("countdown").innerText =
    `${m}:${s.toString().padStart(2,'0')}`;
  remaining--;
},1000);

// QR data
const qrData = JSON.stringify({
  type: "CAMERA_LOCK",
  zone: "SECURE_ZONE",
  start: new Date().toISOString(),
  expire: new Date(Date.now() + expireSeconds*1000).toISOString()
});

new QRCode(document.getElementById("qrcode"), {
  text: qrData,
  width: 220,
  height: 220
});
</script>

</body>
</html>
